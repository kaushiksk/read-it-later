{% extends 'layout.html' %}

{% block body %}


<div class="row">
<!--style="position:fixed;  float:none; display: inline-block;-->
      <div class="col-sm-3" >
     
       
  <div class="panel-group" id="accordion">
          
                 
          <div class="panel panel-default">
                 <a class="btn btn-block btn-index btn-md btn-inverse" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"><strong>Custom Query</strong></a>
                  <div id="collapseTwo" class="panel-collapse collapse {% if dept %}in{% endif %}">
                <div class="panel-body">
                <form action="" method="post">
                  <!-- Add custom form here -->
                
                </form>
                  </div>
              </div>
               
              
          </div>
          <div class="panel panel-default">
              
                 
                      <a class="btn btn-block btn-index btn-md btn-inverse" data-toggle="collapse" data-parent="#accordion" href="#collapseThree"><strong>Departments</strong></a>
                 
            
              <div id="collapseThree" class="panel-collapse collapse {% if dept %}in{% endif %}">
                <div class="panel-body">
                <form action="" method="post">
                {% for department in departments %}
                <input type="submit" name="department" class="btn btn-block btn-index btn-md btn-primary" value="{{ department }}">
                {% endfor %}
                </form>
                  </div>
              </div>
          </div>

          <div class="panel panel-default">
              
                 
                      <a class="btn btn-block btn-index btn-md btn-inverse" data-toggle="collapse" data-parent="#accordion" href="#collapseFour"><strong>Months</strong></a>
                 
            
              <div id="collapseFour" class="panel-collapse collapse {% if month %}in{% endif %}">
                <div class="panel-body">
                <form action="" method="post">
                {% for month in months %}
                <input type="submit" name="month" class="btn btn-block btn-index btn-md btn-primary" value="{{ month }}">
                {% endfor %}
                </form>
                  </div>
              </div>
          </div>
      </div>
  </div>


<div class="col-sm-9" style="overflow-y:scroll; height:100vh;">
{% if dept %}
<h2> {{ dept }} </h2>
{% elif month %}
<h2> {{ month }} </h2>
{% endif %}

  {% for article in articles %}
  <div class="row animated fadeInUp">
            <div class="col-md-5">
                <a href="#">
                    <img class="img-responsive" src="{{article.thumb}}" alt="">
                    <!-- <h6 class="cat"><strong>#{{ article.category}}</strong></h6	> -->
                </a>
            </div>
            <div class="col-md-7">
                <h3 class="animated fadeInUp" style="margin-top:0;">{{ article.title }}</h3>
                <p class="animated fadeInUp">{{ article.description.decode("utf-8") }}</p>
                <a class="btn btn-primary" href="{{ article.url }}" target="_blank">Read Full Article <span class="glyphicon glyphicon-chevron-right"></span></a>
                {% if article.p_id not in my_pids %}
                <button class="btn btn-info fui-plus addme" value="" id="{{article.p_id}}" title="Add to my bookmarks">
                  {% endif %}
                
                
            </div>
        </div>
        <hr class="first"><hr class="second">
 
    {% endfor %}


</div>
</div>

{% endblock %}

{% block script %}
<script type="text/javascript">
	$(".addme").click(function(){
	var id = this.id;
	var mytitle, mycontent;

	$.confirm({
    title: "Bookmark this!",
    content: "url:{{ url_for('static',filename='category-form.html') }}",
	draggable: true,
	icon:'fui-plus',
	backgroundDismiss: true,
	theme:"light",
	type:"blue",
    buttons: {
        add: {
        btnClass: 'btn-blue',
   		action: function () {
        var input = this.$content.find('select');
        	$.ajax({
			  type: "POST",
			  contentType: "application/json; charset=utf-8",
			  url: "/add-mybookmark",
			  data: JSON.stringify({ "p_id" : id, "category":input.find( "option:selected" ).text()}),
			  success: function (stuff) {
              $("#"+id).removeClass('addme');
	        		$("#"+id).removeClass('fui-plus');
              $("#"+id).addClass('fui-check');
		        	$("#"+id).attr("title", "");
              $("#"+id).fadeOut(2000);
              
		        	$.alert({
       				 title: 'Bookmark successfully added!',
        			 content: 'The bookmark is now on your dashboard!',
        			 theme: "light",
        			 type:"green"
        			     });
		        
		        },
			  dataType: "json"
			});
        	
     
            
        }
    },
        cancel: function () {
                $.alert({
       				 title: 'Cancelled!',
        			 content: 'Bookmark not added',
        			 theme: "light",
        			 type:"green"
    });
        }
    }
});
		
	});


</script>

{% endblock %}
{% block style %}
<style>
.cat{
	position:absolute; 
	bottom:2%; 
	left:1%; 
	background-color: #48c9b0; 
	color:#ffffff; 
	text-transform: uppercase;
	padding: 5px 5px;
	border-radius: 5%;
}
</style>
{% endblock %}